#!/bin/sh

#  Copyright 2004 INRIA
#  $Id: configure,v 1.19 2006-03-13 14:44:50 doligez Exp $

exec_prefix=/usr/local
prefix=
bindir=/usr/local/bin
libdir=/usr/local/lib/zenon
debug=false
convert=convert; case `type -path convert` in '') convert=: ;; esac
coqc=coqc; case `type -path coqc` in '') coqc=: ;; esac
gs=gs; case `type -path gs` in '') gs=: ;; esac

sum=:
for i in sum md5 md5sum md5deep sha1deep sha256deep; do
  case `type -path $i` in '') ;; *) sum=$i; break ;; esac
done

case `whoami` in
  doligez | prevosto) debug=true;;
esac

while : ; do
  case $# in 0) break;; esac
  case "$1" in
    -bindir | --bindir) bindir="$2"; shift 2;;
    -convert | --convert) convert="$2"; shift 2;;
    -coqc | --coqc) coqc="$2"; shift 2;;
    -debug | --debug | --enable-debug) debug=true; shift;;
    -exec_prefix | --exec_prefix) exec_prefix="$2"; shift 2;;
    -gs | --gs) gs="$2"; shift 2;;
    -libdir | --libdir) libdir="$2"; shift 2;;
    -nodebug | --nodebug | --disable-debug) debug=false; shift;;
    -prefix | --prefix) prefix="$2"; shift 2;;
    -sum | --sum) sum="$2"; shift 2;;
    *) echo 'usage: ./configure [options]' >&2
       echo 'options are:' >&2
       echo '  [-]-bindir <directory>' >&2
       echo '  [-]-convert <exec-file>' >&2
       echo '  [-]-coq <exec-file>' >&2
       echo '  [-]-debug | --enable-debug' >&2
       echo '  [-]-exec_prefix <directory>' >&2
       echo '  [-]-gs <exec-file>' >&2
       echo '  [-]-libdir <directory>' >&2
       echo '  [-]-nodebug | --disable-debug' >&2
       echo '  [-]-prefix <directory>' >&2
       echo '  [-]-sum <exec-file>' >&2
       exit 2
    ;;
  esac
done

if $debug; then
  bytdebugflags="-g"
  optdebugflags="-dtypes"
else
  bytdebugflags=
  optdebugflags=
fi

{
  echo BINDIR="$prefix$bindir"
  echo BYTDEBUGFLAGS="$bytdebugflags"
  echo CONVERT="$convert"
  echo COQC="$coqc"
  echo exec_prefix="$exec_prefix"
  echo GS="$gs"
  echo LIBDIR="$prefix$libdir"
  echo OPTDEBUGFLAGS="$optdebugflags"
  echo SUM="$sum"
} >.config_var

echo Configuration summary for zenon:
cat .config_var
