#!/bin/sh

#  Copyright 2004 INRIA
#  $Id: configure,v 1.16 2006-02-28 14:33:28 doligez Exp $

bindir=/usr/local/bin
libdir=/usr/local/lib/foc
coqc=`which coqc`
debug=false
sum=''

case `whoami` in
  doligez | prevosto) debug=true;;
esac

while : ; do
  case $# in 0) break;; esac
  case "$1" in
    -bindir | --bindir)
       bindir=$2
       shift 2
    ;;
    -debug | --debug | --enable-debug)
       debug=true
       shift
    ;;
    -libdir | --libdir)
       libdir=$2
       shift 2
    ;;
    -nodebug | --nodebug)
       debug=false
       shift
    ;;
    -sum | --sum)
       sum=$2
       shift 2
    ;;
    *) echo 'usage: ./configure [-bindir <dir>] [-libdir <dir>]' >&2
       exit 2
    ;;
  esac
done

if $debug; then
  bytdebugflags="-g"
  optdebugflags="-dtypes"
else
  bytdebugflags=
  optdebugflags=
fi

case $sum in
'')
  sum=:
  for i in sum md5 md5sum md5deep sha1deep sha256deep; do
    $i /dev/null >/dev/null 2>&1
    case $? in
    0) sum="$i"; break;;
    esac
  done
;;
esac

case `type gs` in
*'not found'*) gs=: ;;
*' is '*) gs=gs ;;
*) gs=: ;;
esac

case `type convert` in
*'not found'*) convert=: ;;
*' is '*) convert=convert ;;
*) convert=: ;;
esac

{
  echo BINDIR="$bindir"
  echo LIBDIR="$libdir"
  echo COQC="$coqc"
  echo BYTDEBUGFLAGS="$bytdebugflags"
  echo OPTDEBUGFLAGS="$optdebugflags"
  echo SUM="$sum"
  echo GS="$gs"
  echo CONVERT="$convert"
} >.config_var

echo Configuration summary for zenon:
cat .config_var
